angular.module("findController",["service"]).controller("findCtrl",["$scope","$timeout","$state","$modal","ctx","SubscribeRest","WechatRest","WechatTypeRest",function(h,d,a,g,i,b,e,f){h.index=0;h.pageNo=1;f.customGET("getWechatType").then(function(j){h.wechatTypes=j.obj;c(0)});h.toggleLevel=function(j){c(j)};function c(j){h.index=j;h.wechatSecondLevels=h.wechatTypes[j].secondLevel}h.goToFindWechat=function(j){a.go("findWechat",{wechatTypeId:j})}}]).controller("findWechatCtrl",["$scope","$state","$stateParams","SubscribeRest","WechatRest",function(a,b,c,f,d){a.typeId=c.wechatTypeId;a.pageNo=1;e(a.typeId,a.pageNo);a.last=true;function e(i,g){var h={typeId:i,pageNo:g};d.customGET("getWechatByType",h).then(function(j){a.last=j.obj.last;if(a.pageNo>1){a.wechats=a.wechats.concat(j.obj.wechatModel)}else{a.wechats=j.obj.wechatModel}})}a.loadMore=function(){a.pageNo=a.pageNo+1;e(a.typeId,a.pageNo)};a.operateSubscribe=function(g,j,i,k){k.stopPropagation();var h={wechatId:g};if(j){f.customGET("unsubscribe",h).then(function(l){a.wechats[i].sub=false})}else{f.customGET("subscribe",h).then(function(l){a.wechats[i].sub=true})}};a.getBtnClass=function(g){return{"btn":true,"pull-right":true,"bg-success":!g,"btn-warning":g}};a.getIconClass=function(g){return{"fa":true,"fa-plus":!g,"fa-minus":g}};a.wechatDetail=function(g){b.go("wechatDetail",{wechatId:g})};a.goToSearchWechat=function(){b.go("searchWechat")}}]);